<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <!-- 개별 카테고리 (item 목록이 카드형식으로 배치되어 있는 화면) -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/login.css">
    <link rel="stylesheet" href="/css/modal.css">
  <title>지점 로그인</title>
</head>
<body>
  <div id="wrap">
    <header>
      <div class="title-container">
        <h1 class="title">지점 로그인</h1>
      </div>
    </header>
    <div class="logo-container" style="display: none;">
      <!--
        <img src="">
      -->
    </div>
    <div class="login-container">
      <form method="get" id="login_form" action="/login"> <!-- action 어디로 연결하는지 여쭤보기-->
        <fieldset>
<!--          <legend class="screen_out">지점 로그인</legend>-->
          <div class="login-box">
            <input type="text" id="loginId" name="id" placeholder="ID" class="login-input id-input">
            <input type="password" id="loginPw" name="code" placeholder="Code" class="login-input pw-input">
          </div>
<!--          <div class="maintain-container">-->
<!--            <input type="checkbox" id="keepLogin" class="check_login"  name="keepLogin">-->
<!--            <label for="keepLogin" class="lab_g">-->
<!--              &lt;!&ndash; <span class="img_top ico_check"></span> &ndash;&gt;-->
<!--              <span class="persist-login">로그인 상태 유지</span>-->
<!--            </label>-->
<!--          </div>-->
          <button type="submit" class="login-btn">로그인</button>
        </fieldset>
      </form>
    </div>
  </div>
  <div class="modal-container">

  </div>

  <script src="js/createModal.js"></script>
<script>
    const loginBtn = document.querySelector('.login-btn');
    const idInput = document.querySelector('.id-input');
    const pwInput = document.querySelector('.pw-input');
    const modalContainer = document.querySelector('modal-container');

    console.log(`/login?id=${idInput.value}&code=${pwInput.value}`);

    loginBtn.addEventListener('click', () => {
        if (!idInput.value.trim() || !pwInput.value.trim()) {
            modalContainer.appendChild(createModal('empty'));
            modalContainer.classList.add('display');
        } else {
            location.href=`/login?id=${idInput.value.trim()}&code=${pwInput.value.trim()}`;
            // fetch(`/login?id=${idInput.value}&code=${pwInput.value}`)
            //     .then(res => res.text())
            //     .then(data => {
            //         try {
            //             const text = data.split('<div class="top-area">')[1].split('<h3 class="clock">')[0];
            //             console.log(text);
            //             // location.href = '/main';
            //
            //         } catch (e) {
            //             const failMsg = data.split('<body>')[1].split('</body>')[0];
            //             modalContainer.appendChild(createModal('', failMsg));
            //             modalContainer.classList.add('display');
            //         }
            //     })
            //     .catch(e => console.error(e));
        }
    });
</script>
</body>
</html>